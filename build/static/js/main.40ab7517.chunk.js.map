{"version":3,"sources":["index.js","../node_modules/express/lib sync","../node_modules/engine.io/lib sync","../node_modules/socket.io/lib sync","ws/stream.js"],"names":["PORT","process","express","require","app","server","Server","io","stream","path","favicon","use","join","__dirname","static","get","req","res","sendFile","console","log","of","on","listen","webpackEmptyContext","e","Error","code","keys","resolve","module","exports","id","socket","data","room","socketId","adapter","rooms","length","to","emit","sender","description","candidate","msg"],"mappings":"kHAAA,gBAAMA,EAAOC,mIAAYD,MAAQ,IAC7BE,EAAUC,EAAS,KACnBC,EAAMF,IACNG,EAASF,EAAS,IAASG,OAAQF,GACnCG,EAAKJ,EAAS,IAATA,CAAwBE,GAC7BG,EAASL,EAAS,KAClBM,EAAON,EAAS,GAChBO,EAAUP,EAAS,KAEvBC,EAAIO,IAAKD,EAASD,EAAKG,KAAMC,EAAW,iBACxCT,EAAIO,IAAK,UAAWT,EAAQY,OAAQL,EAAKG,KAAMC,EAAW,YAE1DT,EAAIW,IAAK,KAAK,SAAEC,EAAKC,GACjBA,EAAIC,SAAUL,EAAY,eAC1BM,QAAQC,IAAI,iBAIhBb,EAAGc,GAAI,WAAYC,GAAI,aAAcd,GAErCH,EAAOkB,OAAQvB,K,sICpBf,SAASwB,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kQCRzB,SAASR,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kBCRzB,SAASR,EAAoBR,GAC5B,IAAIS,EAAI,IAAIC,MAAM,uBAAyBV,EAAM,KAEjD,MADAS,EAAEE,KAAO,mBACHF,EAEPD,EAAoBI,KAAO,WAAa,MAAO,IAC/CJ,EAAoBK,QAAUL,EAC9BM,EAAOC,QAAUP,EACjBA,EAAoBQ,GAAK,K,kBCyBzBF,EAAOC,QAjCQ,SAAEE,GACbA,EAAOX,GAAI,aAAa,SAAEY,GAEtBD,EAAOrB,KAAMsB,EAAKC,MAClBF,EAAOrB,KAAMsB,EAAKE,UAGbH,EAAOI,QAAQC,MAAMJ,EAAKC,MAAMI,OAAS,GAC1CN,EAAOO,GAAIN,EAAKC,MAAOM,KAAM,WAAY,CAAEL,SAAUF,EAAKE,cAKlEH,EAAOX,GAAI,gBAAgB,SAAEY,GACzBD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,eAAgB,CAAEC,OAAQR,EAAKQ,YAI9DT,EAAOX,GAAI,OAAO,SAAEY,GAChBD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,MAAO,CAAEE,YAAaT,EAAKS,YAAaD,OAAQR,EAAKQ,YAIpFT,EAAOX,GAAI,kBAAkB,SAAEY,GAC3BD,EAAOO,GAAIN,EAAKM,IAAKC,KAAM,iBAAkB,CAAEG,UAAWV,EAAKU,UAAWF,OAAQR,EAAKQ,YAI3FT,EAAOX,GAAI,QAAQ,SAAEY,GACjBD,EAAOO,GAAIN,EAAKC,MAAOM,KAAM,OAAQ,CAAEC,OAAQR,EAAKQ,OAAQG,IAAKX,EAAKW,Y","file":"static/js/main.40ab7517.chunk.js","sourcesContent":["const PORT = process.env.PORT || 8000;\nlet express = require( 'express' );\nlet app = express();\nlet server = require( 'http' ).Server( app );\nlet io = require( 'socket.io' )( server );\nlet stream = require( './ws/stream' );\nlet path = require( 'path' );\nlet favicon = require( 'serve-favicon' );\n\napp.use( favicon( path.join( __dirname, 'favicon.ico' ) ) );\napp.use( '/assets', express.static( path.join( __dirname, 'assets' ) ) );\n\napp.get( '/', ( req, res ) => {\n    res.sendFile( __dirname + '/index.html' );\n    console.log(\"start succ\")\n} );\n\n\nio.of( '/stream' ).on( 'connection', stream );\n\nserver.listen( PORT );\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 246;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 376;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 399;","const stream = ( socket ) => {\n    socket.on( 'subscribe', ( data ) => {\n        //subscribe/join a room\n        socket.join( data.room );\n        socket.join( data.socketId );\n\n        //Inform other members in the room of new user's arrival\n        if ( socket.adapter.rooms[data.room].length > 1 ) {\n            socket.to( data.room ).emit( 'new user', { socketId: data.socketId } );\n        }\n    } );\n\n\n    socket.on( 'newUserStart', ( data ) => {\n        socket.to( data.to ).emit( 'newUserStart', { sender: data.sender } );\n    } );\n\n\n    socket.on( 'sdp', ( data ) => {\n        socket.to( data.to ).emit( 'sdp', { description: data.description, sender: data.sender } );\n    } );\n\n\n    socket.on( 'ice candidates', ( data ) => {\n        socket.to( data.to ).emit( 'ice candidates', { candidate: data.candidate, sender: data.sender } );\n    } );\n\n\n    socket.on( 'chat', ( data ) => {\n        socket.to( data.room ).emit( 'chat', { sender: data.sender, msg: data.msg } );\n    } );\n};\n\nmodule.exports = stream;\n"],"sourceRoot":""}